{% schema %}
  {
    "name": "Banner",
    "tag": "section",
    "settings": [
      {
        "type": "select",
        "id": "media_type",
        "label": "Media type",
        "options": [
          {
            "value": "image",
            "label": "Image"
          }, {
            "value": "video",
            "label": "Video"
          }
        ],
        "default": "image"
      },
      {
        "type": "image_picker",
        "id": "banner_image",
        "label": "Banner image"
      },
      {
        "type": "video",
        "id": "banner_video",
        "label": "Banner video"
      },
      {
        "type": "image_picker",
        "id": "video_poster",
        "label": "Video poster image (thumbnail)"
      }, {
        "type": "checkbox",
        "id": "autoplay_video",
        "label": "Autoplay video",
        "default": true
      }, {
        "type": "checkbox",
        "id": "loop_video",
        "label": "Loop video",
        "default": true
      }, {
        "type": "checkbox",
        "id": "mute_video",
        "label": "Mute video",
        "default": true
      }, {
        "type": "checkbox",
        "id": "show_card",
        "label": "Show card"
      }, {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Welcome to Our Store"
      }, {
        "type": "textarea",
        "id": "subtext",
        "label": "Subtext",
        "default": "Discover the latest collections and exclusive offers."
      }, {
        "type": "url",
        "id": "button_link",
        "label": "Button link"
      }, {
        "type": "text",
        "id": "button_text",
        "label": "Button text",
        "default": "Shop Now"
      }
    ],
    "presets": [
      {
        "name": "Banner"
      }
    ]
  }
{% endschema %}

<section class="relative flex items-center justify-center w-full bg-gray-400 overflow-hidden aspect-[29/11]">

  {% if section.settings.media_type == 'video' and section.settings.banner_video != blank %}
    <video
      class="w-full h-full object-cover absolute inset-0"
      {% if section.settings.autoplay_video %}
      autoplay{% endif %}
      {% if section.settings.loop_video %}
      loop{% endif %}
      {% if section.settings.mute_video %}
      muted{% endif %}
      playsinline
      {% if section.settings.video_poster != blank %}
      poster="{{ section.settings.video_poster | img_url: '1600x' }}"
      {% endif %}>
      <source src="{{ section.settings.banner_video.sources[1].url }}" type="video/mp4">
      <source src="{{ section.settings.banner_video.sources[0].url }}" type="video/webm">
      Your browser does not support the video tag.
    </video>
  {% elsif section.settings.media_type == 'image' and section.settings.banner_image != blank %}
    <img
      src="{{ section.settings.banner_image | img_url: '1600x' }}"
      alt="{{ section.settings.heading | escape }}"
      class="w-full aspect-[29/11] object-contain absolute inset-0">
  {% endif %}

  {% if section.settings.show_card %}
    <div class="relative z-10 bg-white/70 rounded-xl p-6 md:p-10 flex flex-col items-center max-w-2xl mx-auto shadow-lg">
      <h1 class="text-2xl md:text-4xl font-bold text-gray-800 text-center">{{ section.settings.heading }}</h1>
      <p class="mt-2 md:mt-4 text-gray-700 text-base md:text-lg text-center">{{ section.settings.subtext }}</p>
      {% if section.settings.button_link != blank and section.settings.button_text != blank %}
        <a href="{{ section.settings.button_link }}" class="mt-5 px-6 py-3 rounded-md bg-gray-800 text-white font-semibold shadow hover:bg-gray-700 transition">
          {{ section.settings.button_text }}
        </a>
      {% endif %}
    </div>
  {% endif %}
</section>