{% assign default_categories = 'Electronics,Fashion,Home & Garden,Sports,Books,Beauty,Toys,Automotive' | split: ',' %}

<section class="md:hidden">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <div class="swiper category-swiper p-4">
    <div class="swiper-wrapper">
      {% if section.blocks.size > 0 %}
      {% for block in section.blocks %}
      <div class="swiper-slide">
        <a href="{{ block.settings.category_link | default: '/collections/all' }}" class="block text-center">
          <div class="h-20 w-20 rounded-full overflow-hidden shadow-lg mx-auto mb-2">
            {% if block.settings.category_image %}
            <img class="h-full w-full object-cover" src="{{ block.settings.category_image | image_url }}"
              alt="{{ block.settings.category_title }}">
            {% else %}
            <div class="h-full w-full bg-gray-200 flex items-center justify-center">
              <span class="text-gray-500 text-xs">{{ block.settings.category_title | slice: 0, 2 | upcase }}</span>
            </div>
            {% endif %}
          </div>
          <h3 class="text-xs font-medium uppercase">{{ block.settings.category_title }}</h3>
        </a>
      </div>
      {% endfor %}
      {% else %}
      {% for category in default_categories %}
      <div class="swiper-slide">
        <a href="/collections/{{ category | downcase | replace: ' ', '-' | replace: '&', 'and' }}"
          class="block text-center">
          <div
            class="h-20 w-20 rounded-full overflow-hidden shadow-lg mx-auto mb-2 bg-gray-200 flex items-center justify-center">
            <span class="text-gray-500 text-sm font-bold">{{ category | slice: 0, 2 | upcase }}</span>
          </div>
          <h3 class="text-xs font-medium uppercase">{{ category }}</h3>
        </a>
      </div>
      {% endfor %}
      {% endif %}
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    const swiper = new Swiper('.category-swiper', {
      slidesPerView: 'auto',
      spaceBetween: 16,
      loop: true,
      freeMode: true,
      freeModeMomentum: true,
      freeModeSticky: false,
      slidesPerView: 4.5,
      breakpoints: {
        320: { slidesPerView: 3.5 },
        375: { slidesPerView: 4.5 },
        414: { slidesPerView: 5.5 }
      }
    });
  </script>
</section>

{% schema %}
{
"name": "Category Stories",
"tag": "section",
"settings": [
{
"type": "header",
"content": "Mobile Category Stories"
}
],
"blocks": [
{
"type": "category",
"name": "Category",
"settings": [
{
"type": "image_picker",
"id": "category_image",
"label": "Category image"
},
{
"type": "text",
"id": "category_title",
"label": "Category title"
},
{
"type": "url",
"id": "category_link",
"label": "Category link"
}
]
}
],
"max_blocks": 10,
"presets": [
{
"name": "Category Stories",
"category": "Collections"
}
]
}
{% endschema %}