{% schema %}
{
"name": "Product Gallery",
"tag": "section",
"settings": [
{
"type": "collection",
"id": "gallery_collection",
"label": "Choose collection for gallery"
},
{
"type": "text",
"id": "section_heading",
"label": "Gallery heading"
},
{
"type": "range",
"id": "products_limit",
"label": "Number of products to show",
"default": 20,
"step": 1,
"min": 1,
"max": 50
},
{
"type": "select",
"id": "gallery_layout",
"label": "Gallery layout",
"options": [
{
"value": "carousel",
"label": "Carousel"
},
{
"value": "grid",
"label": "Grid"
}
],
"default": "carousel"
}
],
"presets": [
{
"name": "Product Gallery"
}
]
}
{% endschema %}

<section class="w-full">
  <div class="mx-auto py-4 px-2 md:px-10">
    <div class="flex justify-between items-center">
      <h2 class="text-[22px] md:text-3xl font-bold md:text-center uppercase">{{ section.settings.section_heading }}
      </h2>
      <a href="{{ section.settings.gallery_collection | prepend: " /collections/" }}"
        class="p-1 px-2 bg-gray-200 text-xs grid place-items-center max-w-fit md:text-base" role="button">Discover
        More</a>
    </div>
  </div>

  {% assign gallery_collection = collections[section.settings.gallery_collection] %}
  {% if gallery_collection and gallery_collection.products_count > 0 %}

  <div class="product-gallery overflow-x-auto scrollbar-hide">
    {% if section.settings.gallery_layout == 'carousel' %}
    <div class="flex gap-2 pb-4" style="width: max-content;">
      {% for product in gallery_collection.products limit: section.settings.products_limit %}
      <div class="w-[50vw] md:w-[20vw]">
        {% render 'product-card-enhanced', product: product, show_add_to_cart: true %}
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {% for product in gallery_collection.products limit: 4 %}
      {% render 'product-card-enhanced', product: product, show_add_to_cart: true %}
      {% endfor %}
    </div>
    <a href="{{ section.settings.gallery_collection | prepend: " /collections/" }}"
      class="btn btn-primary m-auto my-4 px-4 py-2 border-2 w-fit block md:text-xl">Discover More</a>
    {% endif %}
  </div>

  {% else %}
  <div class="text-center py-16">
    <p class="text-xl text-gray-500">No products available in this gallery.</p>
  </div>
  {% endif %}
</section>

{% stylesheet %}
.product-gallery {
scrollbar-width: none;
scrollbar-color: #cbd5e0 transparent;
}
.product-gallery::-webkit-scrollbar {
display: none;
}
.product-gallery::-webkit-scrollbar-track {
background: transparent;
}
.product-gallery::-webkit-scrollbar-thumb {
background-color: #cbd5e0;
border-radius: 3px;
}
.product-gallery::-webkit-scrollbar-thumb:hover {
background-color: #a0aec0;
}
{% endstylesheet %}