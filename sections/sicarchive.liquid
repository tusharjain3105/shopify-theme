{% schema %}
{
"name": "SicArchive",
"tag": "section",
"settings": [
{
"type": "select",
"id": "media_type",
"label": "Media type",
"options": [
{
"value": "image",
"label": "Image"
}, {
"value": "video",
"label": "Video"
}
],
"default": "image"
},
{
"type": "image_picker",
"id": "archive_image",
"label": "Archive image"
},
{
"type": "video",
"id": "archive_video",
"label": "Archive video"
}
],
"blocks": [
{
"type": "widget",
"name": "Widget",
"settings": [
{
"type": "text",
"id": "widget_text",
"label": "Widget text"
},
{
"type": "range",
"id": "position_x",
"label": "Horizontal position (%)",
"min": 0,
"max": 100,
"step": 5,
"default": 20
},
{
"type": "range",
"id": "position_y",
"label": "Vertical position (%)",
"min": 0,
"max": 100,
"step": 5,
"default": 30
}
]
}
],
"max_blocks": 5,
"presets": [
{
"name": "SIC Archive"
}
]
}
{% endschema %}

<section class="relative py-16 md:py-10 flex items-center justify-center overflow-hidden">
  
  <!-- Text with Video/Image Inside -->
  <div class="relative text-center">
    <div class="sicarchive-container">
      <!-- Media Layer -->
      {% if section.settings.media_type == 'video' and section.settings.archive_video != blank %}
        <video 
          class="sicarchive-media" 
          autoplay 
          loop 
          muted 
          playsinline>
          <source src="{{ section.settings.archive_video.sources[1].url }}" type="video/mp4">
          <source src="{{ section.settings.archive_video.sources[0].url }}" type="video/webm">
        </video>
      {% elsif section.settings.media_type == 'image' and section.settings.archive_image != blank %}
        <img 
          src="{{ section.settings.archive_image | img_url: '1600x' }}" 
          alt="SicArchive" 
          class="sicarchive-media">
      {% endif %}
      
      <!-- Text Mask -->
      <h1 class="sicarchive-text text-[2rem] md:text-[12rem] font-black leading-none tracking-wider">
        SICARCHIVE
      </h1>
    </div>
  </div>

  <!-- Floating Widgets -->
  {% for block in section.blocks %}
    <div class="absolute text-black font-bold text-lg md:text-xl animate-pulse bg-white/80 px-3 py-1 rounded"
         style="left: {{ block.settings.position_x }}%; top: {{ block.settings.position_y }}%;">
      {{ block.settings.widget_text }}
    </div>
  {% endfor %}

</section>

{% stylesheet %}
.sicarchive-container {
  position: relative;
  display: inline-block;
}

.sicarchive-media {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='180'%3ESICARCHIVE%3C/text%3E%3C/svg%3E");
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='180'%3ESICARCHIVE%3C/text%3E%3C/svg%3E");
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

@media screen and (min-width: 768px) {
  .sicarchive-media {
    -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='180'%3ESICARCHIVE%3C/text%3E%3C/svg%3E");
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='180'%3ESICARCHIVE%3C/text%3E%3C/svg%3E");
  }
}

.sicarchive-text {
  color: transparent;
  -webkit-text-stroke: 0px rgba(0,0,0,0.1);
  text-stroke: 0px rgba(0,0,0,0.1);
  position: relative;
  z-index: 1;
}
{% endstylesheet %}
